<!DOCTYPE html>
<html lang="zh-cmn-Hans"><!-- 简体中文（大陆）现代标准 -->
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, shrink-to-fit=no"/>
    <meta name="renderer" content="webkit"/>
    <meta name="force-rendering" content="webkit"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
    <title>帖子 | WearBBS</title>
    <link
            rel="stylesheet"
            href="https://cdn.jsdelivr.net/npm/mdui@1.0.1/dist/css/mdui.min.css"
            integrity="sha384-cLRrMq39HOZdvE0j6yBojO4+1PrHfB7a9l5qLcmRm/fiWXYY+CndJPmyu5FV/9Tw"
            crossorigin="anonymous"
    />
</head>
<body class="mdui-theme-primary-blue mdui-theme-accent-blue mdui-drawer-body-left mdui-appbar-with-toolbar">
<div id="drawer"></div>
<div id="appbar"></div>


<div class="thread mdui-typo">
    <h1 id="thread_title" class="mdui-text-color-theme" style="font-size: xxx-large">Loading...</h1>
    <div class="thread_publisher">
        <a id="thread_publisher_userName" class="user-popover-trigger mdui-text-color-theme-text">Loading...</a>
        <i id="admin" class="mdui-icon material-icons" style="display: none;margin-bottom: 10px">check_circle</i>
        <span id="thread_time" class="time mdui-text-color-theme-secondary">Loading...</span>
    </div>
    <div class="mdui-card mdui-card-shadow question">
        <div id="thread_content">Loading...</div>

        <div class="mc-loading mdui-hidden">
            <div class="mdui-spinner">
                <div class="mdui-spinner-layer ">
                    <div class="mdui-spinner-circle-clipper mdui-spinner-left">
                        <div class="mdui-spinner-circle"></div>
                    </div>
                    <div class="mdui-spinner-gap-patch">
                        <div class="mdui-spinner-circle"></div>
                    </div>
                    <div class="mdui-spinner-circle-clipper mdui-spinner-right">
                        <div class="mdui-spinner-circle"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<style>

    .mdui-card {
        position: relative;
        box-sizing: border-box;
        border: 1px solid rgba(0,0,0,.12);
        border-radius: 8px;
        padding: 2%;
    }
    .thread {
        margin:5%;
    }
    .thread_publisher{
        margin-bottom: 20px;
        margin-top: 10px;
        font-size: 20px;
    }
</style>
<script
        src="https://cdn.jsdelivr.net/npm/mdui@1.0.1/dist/js/mdui.min.js"
        integrity="sha384-gCMZcshYKOGRX9r6wbDrvF+TcCCswSHFucUzUPwka+Gr+uHgjlYvkABr95TCOz3A"
        crossorigin="anonymous">
</script>
<script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js"></script>
<script src="../js/util/NetWorkUtil.js"></script>
<script src="../js/api/Thread.js"></script>
<script src="../js/App.js"></script>
<script>
    $("#appbar").load("../../common/appbar.html", function (responseTxt, statusTxt) {
        if (statusTxt === "success") {
            $("#title").text("帖子");
        }
    });
    $("#drawer").load("../../common/drawer.html", function (responseTxt, statusTxt) {
        if (statusTxt === "success") {
            $("#main").attr("href","../");
        }
    });

    $(function () {
        let msg = getQueryStringByName("msg");
        if (msg) {
            mdui.snackbar(msg);
        }
        getThreadDetail("id=" + getQueryStringByName("id"), function (data) {
            $("#thread_title").text(data["title"]);
            $("#thread_time").text(before_time(data["postTime"]));
            $("#thread_content").html(data["content"]);
            $("#thread_publisher_userName").text(data["publisher"]["userName"]);
            if(data["publisher"]["admin"]){
                $("#admin").show();
            }
        }, function (data) {
            $("#thread_title").text("加载失败");
            $("#thread_time").text("加载失败");
            $("#thread_content").html("加载失败");
            $("#thread_publisher_userName").text("加载失败");
            mdui.snackbar(analysisError(data["error"]));
        });
    });
</script>
</body>
</html>